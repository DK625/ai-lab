Dựa trên nội dung file `planning.md` bạn cung cấp và kiến thức về các công cụ này (đặc biệt là AmpCode Librarian và Exa.ai), câu trả lời ngắn gọn là: **Librarian là "Kho sách được chọn lọc", còn Exa là "Công cụ tìm kiếm Internet".**

Dù AmpCode Librarian rất mạnh, việc giữ lại **Exa** trong quy trình (pipeline) `planning.md` có ý nghĩa quan trọng về **tính cập nhật** và **phạm vi tìm kiếm**.

Dưới đây là phân tích chi tiết lý do tại sao vẫn cần cả hai:

### 1. Sự khác biệt về Nguồn dữ liệu (Source of Truth)

* **Librarian (Curated/Indexed Knowledge):**
* **Bản chất:** Librarian thường hoạt động dựa trên RAG (Retrieval-Augmented Generation) trên một tập dữ liệu **đã được thu thập và index trước**. Nó giống như bạn vào thư viện trường đại học tra cứu những cuốn sách giáo khoa chuẩn mực.
* **Vai trò trong `planning.md`:** "External patterns". Nó dùng để tìm các mẫu thiết kế (design patterns), kiến trúc chuẩn (best practices) từ các nguồn code chất lượng cao hoặc tài liệu nội bộ mà AmpCode đã "đọc" và hiểu sâu.
* **Hạn chế:** Nếu một thư viện mới ra đời hôm qua, hoặc một tài liệu ngách chưa được nạp vào hệ thống của Librarian, nó sẽ không biết.


* **Exa (Live Web Search for LLMs):**
* **Bản chất:** Exa (trước đây là Metaphor) là một search engine được tối ưu cho AI. Nó quét toàn bộ internet **theo thời gian thực**.
* **Vai trò trong `planning.md`:** "Library docs". Nó dùng để tìm tài liệu API cụ thể, *changelog* mới nhất, hoặc so sánh các thư viện open-source mà hệ thống chưa từng biết đến.
* **Sức mạnh:** Tìm kiếm được những thứ "ad-hoc" (ngẫu hứng) nằm ngoài kho dữ liệu của Librarian.



### 2. Kịch bản sử dụng thực tế trong Phase 1: Discovery

Hãy tưởng tượng bạn đang lập kế hoạch (`planning.md`) cho một tính năng mới cần tích hợp một thư viện thanh toán mới toanh.

| Tình huống | Dùng Librarian (AmpCode) | Dùng Exa |
| --- | --- | --- |
| **Câu hỏi** | "Mô hình Adapter Pattern chuẩn để tích hợp cổng thanh toán là gì?" | "Tìm tài liệu API v3 mới nhất của Stripe vừa update tuần trước." |
| **Kết quả** | Trả về code mẫu sạch đẹp, chuẩn mực từ các repo nổi tiếng đã được học. | Trả về link trực tiếp đến trang docs mới nhất chứa hàm `Stripe.newMethod()` mà Librarian chưa kịp cập nhật. |
| **Tại sao?** | Librarian giỏi về **Deep Context** và Logic. | Exa giỏi về **Freshness** (Độ mới) và **Discovery** (Khám phá rộng). |

### 3. Tại sao `planning.md` lại tách riêng?

Trong file `planning.md`, quy trình được chia rõ:

* `Librarian` → **External patterns**: Tập trung vào *chiến lược* (Làm thế nào để cấu trúc code cho đúng?).
* `exa` → **Library docs**: Tập trung vào *chi tiết kỹ thuật* (Hàm này nhận tham số gì? Thư viện này có tương thích với version hiện tại không?).

### Kết luận

Nếu bạn dùng AmpCode, **Librarian** là bộ não trung tâm chứa kiến thức sâu. Tuy nhiên, **Exa** đóng vai trò là "đôi mắt" nhìn ra thế giới bên ngoài thời gian thực.

Trong bối cảnh AI Coding Agent:

* Bỏ **Librarian**: Agent sẽ code thiếu chuẩn mực, thiếu các pattern tốt.
* Bỏ **Exa**: Agent sẽ bị "mù" thông tin mới, dễ dùng sai các API đã deprecated hoặc không biết đến các giải pháp mới xuất hiện trên Github/Internet.

**Lời khuyên:** Bạn nên giữ cả hai. Dùng Librarian để lấy kiến thức nền tảng (Foundation) và dùng Exa để lấp đầy các khoảng trống thông tin cụ thể (Specifics) mà Librarian chưa bao phủ.